{
  "$schema": "../src/sink.schema.json",
  "description": "Cross-platform package installation with automatic package manager setup",
  "version": "1.0.0",
  "platforms": [
    {
      "os": "darwin",
      "match": "darwin*",
      "name": "macOS",
      "install_steps": [
        {
          "name": "Ensure Homebrew is installed",
          "check": "command -v brew",
          "on_missing": [
            {
              "name": "Install Homebrew",
              "command": "/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\""
            },
            {
              "name": "Add Homebrew to PATH",
              "command": "echo 'eval \"$(/opt/homebrew/bin/brew shellenv)\"' >> ~/.zprofile && eval \"$(/opt/homebrew/bin/brew shellenv)\""
            }
          ]
        },
        {
          "name": "Install jq",
          "check": "command -v jq",
          "on_missing": [
            {
              "name": "Install jq via Homebrew",
              "command": "brew install jq",
              "error": "Failed to install jq. Check network connection and Homebrew status."
            }
          ]
        },
        {
          "name": "Verify jq installation",
          "command": "jq --version"
        }
      ]
    },
    {
      "os": "linux",
      "match": "linux*",
      "name": "Linux",
      "distributions": [
        {
          "ids": ["ubuntu", "debian"],
          "name": "Ubuntu/Debian",
          "install_steps": [
            {
              "name": "Update apt package list",
              "command": "sudo apt-get update -qq"
            },
            {
              "name": "Install jq",
              "check": "command -v jq",
              "on_missing": [
                {
                  "name": "Install jq via apt",
                  "command": "sudo apt-get install -y jq",
                  "error": "Failed to install jq. Check network connection and repository configuration."
                }
              ]
            },
            {
              "name": "Verify jq installation",
              "command": "jq --version"
            }
          ]
        },
        {
          "ids": ["fedora", "rhel", "centos", "rocky", "almalinux"],
          "name": "Red Hat Family",
          "install_steps": [
            {
              "name": "Install jq",
              "check": "command -v jq",
              "on_missing": [
                {
                  "name": "Install jq via dnf",
                  "command": "sudo dnf install -y jq",
                  "error": "Failed to install jq. Check network connection and repository configuration."
                }
              ]
            },
            {
              "name": "Verify jq installation",
              "command": "jq --version"
            }
          ]
        },
        {
          "ids": ["alpine"],
          "name": "Alpine Linux",
          "install_steps": [
            {
              "name": "Install jq",
              "check": "command -v jq",
              "on_missing": [
                {
                  "name": "Install jq via apk",
                  "command": "sudo apk add jq",
                  "error": "Failed to install jq. Check network connection and repository configuration."
                }
              ]
            },
            {
              "name": "Verify jq installation",
              "command": "jq --version"
            }
          ]
        },
        {
          "ids": ["arch", "manjaro"],
          "name": "Arch Linux",
          "install_steps": [
            {
              "name": "Install jq",
              "check": "command -v jq",
              "on_missing": [
                {
                  "name": "Install jq via pacman",
                  "command": "sudo pacman -S --noconfirm jq",
                  "error": "Failed to install jq. Check network connection and repository configuration."
                }
              ]
            },
            {
              "name": "Verify jq installation",
              "command": "jq --version"
            }
          ]
        }
      ],
      "fallback": {
        "error": "Unsupported Linux distribution. Please install jq manually using your distribution's package manager."
      }
    }
  ],
  "fallback": {
    "error": "Unsupported operating system. This configuration supports macOS and Linux only."
  }
}
